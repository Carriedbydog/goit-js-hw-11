{"mappings":"AAmCA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,MAAOF,SAASC,cAAc,SAC9BE,QAASH,SAASC,cAAc,YAChCG,YAAaJ,SAASC,cAAc,eAGhCI,EAAW,IArCjB,MACEC,MAAQ,GACRC,GAAY,GACZC,KAAO,EAEPC,YACE,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,IATM,qCAUNC,EAAGC,KAAKR,MACRS,WAAY,QACZC,YAAa,aACbC,YAAY,EACZV,SAAUO,MAAKP,EACfC,KAAMM,KAAKN,OAIb,OAAOU,MADK,2BAAeR,KACTS,MAAKC,IACrB,IAAKA,EAAIC,GACP,MAAM,IAAIC,MAAM,QAASF,EAAIG,YAE/B,OAAOH,EAAII,MAAM,G,CAGjBC,cACF,OAAOX,MAAKP,C,GAahB,IAAImB,EAAU,EA+Bd,SAASC,IACHtB,EAASG,OAASkB,IACpB5B,EAAKM,YAAYwB,UAAW,E,CAIhC,SAASC,GAAeC,aACtBA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,IAEA,MAAO,2DACuBN,WAAsBE,qGAGjCC,0EAGAC,6EAGGC,8EAGCC,+C,CAMzB,SAASC,EAAaC,GACpB,MAAMC,EAASD,EAAME,IAAIX,GAAgBY,KAAK,IAC9C3C,EAAKK,QAAQuC,mBAAmB,YAAaH,E,CAlE/CzC,EAAKM,YAAYwB,UAAW,EAE5B9B,EAAKC,KAAK4C,iBAAiB,UAI3B,SAAsBC,GACpBA,EAAEC,iBACF,MAAMvC,EAAQsC,EAAEE,OAAOC,SAASC,YAAYC,MAC5C5C,EAASC,MAAQA,EACjBD,EAASG,KAAO,EAChBH,EAASI,UAAUH,GAAOa,MAAK+B,IAC7BxB,EAAUyB,KAAKC,KAAKF,EAAKG,KAAOhD,EAASoB,SACzC3B,EAAKK,QAAQmD,UAAY,GACzBjB,EAAaa,EAAKG,MAClBvD,EAAKM,YAAYwB,UAAW,EAC5BD,GAAiB,IAEnBiB,EAAEE,OAAOS,O,IAfXzD,EAAKM,YAAYuC,iBAAiB,SAkBlC,SAAyBC,GACvBvC,EAASG,MAAQ,EACjBH,EAASI,YAAYU,MAAK+B,IACxBb,EAAaa,EAAKG,MAClBvD,EAAKM,YAAYwB,UAAW,EAC5BD,GAAiB,G","sources":["src/index.js"],"sourcesContent":["// =======================================================================\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst KEY = '39010552-8e1294040e1d3b982f9767e41';\n\nclass ImageApi {\n  query = '';\n  #per_page = 40;\n  page = 1;\n\n  getImages() {\n    const PARAMS = new URLSearchParams({\n      key: KEY,\n      q: this.query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: this.#per_page,\n      page: this.page,\n    });\n\n    const url = `${BASE_URL}?${PARAMS}`;\n    return fetch(url).then(res => {\n      if (!res.ok) {\n        throw new Error('Error', res.statusText);\n      }\n      return res.json();\n    });\n  }\n  get perPage() {\n    return this.#per_page;\n  }\n}\n\n// =======================================================================\nconst refs = {\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('input'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst imageApi = new ImageApi();\nlet maxPage = 1;\nrefs.loadMoreBtn.disabled = true;\n// =======================================================================\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n// =======================================================================\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  const query = e.target.elements.searchQuery.value;\n  imageApi.query = query;\n  imageApi.page = 1;\n  imageApi.getImages(query).then(data => {\n    maxPage = Math.ceil(data.hits / imageApi.perPage);\n    refs.gallery.innerHTML = '';\n    renderImages(data.hits);\n    refs.loadMoreBtn.disabled = false;\n    updateStatusBtn();\n  });\n  e.target.reset();\n}\n\nfunction onLoadMoreClick(e) {\n  imageApi.page += 1;\n  imageApi.getImages().then(data => {\n    renderImages(data.hits);\n    refs.loadMoreBtn.disabled = false;\n    updateStatusBtn();\n  });\n}\n\nfunction updateStatusBtn() {\n  if (imageApi.page === maxPage) {\n    refs.loadMoreBtn.disabled = true;\n  }\n}\n\nfunction templateImages({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<div class=\"photo-card\">\n      <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes ${likes}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Views ${views}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Comments ${comments}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads ${downloads}</b>\n        </p>\n      </div>\n    </div>`;\n}\n\nfunction renderImages(image) {\n  const markup = image.map(templateImages).join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["$1f0dc3b9307be026$var$refs","form","document","querySelector","input","gallery","loadMoreBtn","$1f0dc3b9307be026$var$imageApi","query","per_page","page","getImages","PARAMS","URLSearchParams","key","q","this","image_type","orientation","safesearch","fetch","then","res","ok","Error","statusText","json","perPage","$1f0dc3b9307be026$var$maxPage","$1f0dc3b9307be026$var$updateStatusBtn","disabled","$1f0dc3b9307be026$var$templateImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$1f0dc3b9307be026$var$renderImages","image","markup","map","join","insertAdjacentHTML","addEventListener","e","preventDefault","target","elements","searchQuery","value","data","Math","ceil","hits","innerHTML","reset"],"version":3,"file":"index.accd5862.js.map"}